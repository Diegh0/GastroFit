<div class="card-form">
  <h2>Agregar nueva comida</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()">
    <div class="form-group">
      <label>Nombre de la comida</label>
      <input formControlName="nombre" type="text" required />
    </div>

    <div class="form-group">
      <label>Imagen (opcional)</label>
      <input type="file" (change)="onImagenSeleccionada($event)" />
      <img *ngIf="imagenPreview" [src]="imagenPreview" class="preview" />
    </div>

    <div formArrayName="ingredientes">
      <h3>Ingredientes</h3>
      <div *ngFor="let ingr of ingredientes.controls; let i = index" [formGroupName]="i" class="ingrediente-card">
        <div class="campo">
          <label>Nombre del ingrediente</label>
          <input formControlName="nombre" placeholder="Ej: Pechuga de pollo" />
        </div>
    
        <div class="campo">
          <label>Peso en gramos</label>
          <input formControlName="gramos" type="number" placeholder="Ej: 200" />
        </div>
    
        <div class="campo">
          <label>Calorías por 100g</label>
          <input formControlName="caloriasPor100g" type="number" placeholder="Ej: 120" />
        </div>
    
        <div class="campo">
          <label>Proteínas por 100g</label>
          <input formControlName="proteinas" type="number" placeholder="Ej: 23" />
        </div>
    
        <div class="campo">
          <label>Grasas por 100g</label>
          <input formControlName="grasas" type="number" placeholder="Ej: 1.5" />
        </div>
    
        <div class="campo">
          <label>Hidratos de carbono por 100g</label>
          <input formControlName="hidratos" type="number" placeholder="Ej: 0" />
        </div>
    
        <button type="button" (click)="eliminarIngrediente(i)">❌</button>
      </div>
    
      <button type="button" (click)="agregarIngrediente()">➕ Añadir ingrediente</button>
    </div>
    

    <button type="submit" [disabled]="form.invalid">Guardar comida</button>
  </form>
  
</div>
